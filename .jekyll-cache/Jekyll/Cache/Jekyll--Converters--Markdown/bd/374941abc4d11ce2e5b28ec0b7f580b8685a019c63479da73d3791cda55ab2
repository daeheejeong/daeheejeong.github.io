I"<h2 id="jpa-entity에서-enum-활용하기">JPA Entity에서 Enum 활용하기</h2>

<p>최근 사내에서 혼자 개발중인 프로젝트에 JPA를 활용하여 개발을 하면서,
엔터티들이 갖는 각종 상태 값들의 저장에 대해 고민을 해보았습니다.</p>

<p>단순 <strong>String</strong> 형태로 선언 해놓은 어트리뷰트라면, <em>DB에서 유지관리 되는 형식에 맞춰 값이 들어오고 있는지</em> 에 대해서도 이슈가 있을 것입니다.</p>

<p>따라서 인터넷을 찾아보며 enum을 활용하여 이러한 작업에 있어 효율적으로 작업을 진행할 수 있었습니다.</p>

<h2 id="enumerated">@Enumerated</h2>

<p>Entity의 Attribute에 Enum을 사용하려면 해당 어트리뷰트 변수 위에 <code class="language-plaintext highlighter-rouge">@Enumerated</code> 애노테이션을 지정해주면 됩니다.</p>

<h2 id="enumtypeordinal--enumtypestring">EnumType.ORDINAL &amp; EnumType.STRING</h2>

<p><code class="language-plaintext highlighter-rouge">@Enumerated</code> 애노테이션에는 <strong>ORDINAL</strong>과 <strong>STRING</strong>의 두가지 EnumType을 부여할 수 있습니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Enumerated(EnumType.ORDINAL)</code> : Enum의 순서값을 DB에 저장합니다</li>
  <li><code class="language-plaintext highlighter-rouge">@Enumerated(EnumType.STRING)</code> : Enum의 name을 DB에 저장합니다.</li>
</ul>

<h3 id="예시">예시)</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">OrderStep</span> <span class="o">{</span>
    <span class="no">TEMPORARY</span><span class="o">,</span>      <span class="cm">/* 가주문 */</span>
    <span class="no">PAYED</span><span class="o">,</span>          <span class="cm">/* 결제완료 */</span>
    <span class="no">PREPARING</span><span class="o">,</span>      <span class="cm">/* 상품준비중 */</span>
    <span class="no">SHIPPED</span>         <span class="cm">/* 발송완료 */</span>
<span class="o">}</span>
</code></pre></div></div>

<p>만일 Enum의 value를 <code class="language-plaintext highlighter-rouge">PAYED</code>로 지정하고 save했을 때</p>

<p>EnumType.ORDINAL의 경우 <strong>1</strong> 이라는 순번이 저장,
EnumType.STRING의 경우 <strong>PAYED</strong> 라는 네임 값이 저장됩니다.</p>

<p>이렇게 하여 Enum을 활용할 수 있지만, 아직 완벽해 보이지는 않는 것 같습니다.</p>

<p><strong>STRING</strong>을 사용하자니 이러한 애트리뷰트가 많아진다면 DB에게도 무리를 주는 것 같고,
<strong>ORDINAL</strong>의 경우는 저장되는 실제값이 자바코드의 enum 밸류 순서에 의존하는 것 같아 정합성에 대한 불안함이 생깁니다.</p>

<p>따라서 이러한 부분에 대한 해소방법을 찾아보니 <code class="language-plaintext highlighter-rouge">Converter</code>를 사용하는 방법을 알게되었습니다.</p>

<p>JPA Entity에서 Enum 사용 방법에 대해서는 여기까지 정리하고, 문제점을 마저 보완하기위해 <code class="language-plaintext highlighter-rouge">Converter</code>를 사용한 내용은 별도로 글을 작성하도록 하겠습니다.</p>

<p><br /></p>

<p>혹시 제 글에 잘못된 부분이 있다면 댓글 혹은 PR 주시면 감사하겠습니다. :)</p>
:ET